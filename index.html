<!doctype html>

<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tarot Chat — Demo</title>
  <style>
    :root{--bg:#0b0f1a;--card:#f5f5f7;--accent:#a37cff}
    body{font-family:Inter,system-ui,Arial,sans-serif;background:linear-gradient(180deg,#071026 0%,#081225 100%);color:#e9eef8;margin:0;padding:24px;display:flex;gap:24px;min-height:100vh}
    .app{max-width:980px;margin:auto;display:grid;grid-template-columns:360px 1fr;gap:20px;width:100%}
    .panel{background:rgba(255,255,255,0.03);padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.6)}
    h1{font-size:18px;margin:0 0 8px}/* cartas */
.deck{display:flex;flex-direction:column;gap:12px}
.card-back{width:100%;height:160px;border-radius:8px;background:linear-gradient(135deg,var(--accent),#5bb4ff);display:flex;align-items:center;justify-content:center;color:#081225;font-weight:700;font-size:20px}
.card-face{width:100%;height:220px;border-radius:8px;background:var(--card);color:#071025;padding:12px;box-sizing:border-box;display:flex;flex-direction:column;justify-content:space-between}
.controls{display:flex;gap:8px;margin-top:10px}
button{background:var(--accent);border:none;color:white;padding:10px 12px;border-radius:8px;cursor:pointer}
button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.08)}

/* chat */
.chat{display:flex;flex-direction:column;height:520px}
.messages{flex:1;overflow:auto;padding:12px;display:flex;flex-direction:column;gap:10px}
.msg{max-width:78%;padding:10px 12px;border-radius:12px}
.msg.user{align-self:flex-end;background:rgba(163,124,255,0.16)}
.msg.bot{align-self:flex-start;background:rgba(255,255,255,0.04)}
.composer{display:flex;gap:8px;margin-top:10px}
input[type=text]{flex:1;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit}
small.hint{display:block;margin-top:8px;color:#aeb7c6}

footer.note{margin-top:8px;color:#9fb0d6;font-size:13px}

  </style>
</head>
<body>
  <div class="app">
    <div class="panel">
      <h1>Tarot Chat — Muestra</h1>
      <p class="hint">Escribe una pregunta (opcional) y pulsa <strong>Leer carta</strong>. El sistema extrae una carta al azar y te da una interpretación. Puedes invertir la carta.</p><div class="deck">
    <div id="cardVisual" class="card-back">Baraja (haz lectura)</div>
    <div style="display:flex;gap:8px;align-items:center;justify-content:space-between">
      <div>
        <label style="font-size:13px">Posición:</label>
        <select id="spreadSelect">
          <option value="single">Carta única (consejo)</option>
          <option value="three">Tirada de 3 (pasado/presente/futuro)</option>
        </select>
      </div>
      <div style="text-align:right"><label style="font-size:13px">Reversa posible</label><br/><input type="checkbox" id="allowReverse" checked></div>
    </div>

    <div class="controls">
      <button id="readBtn">Leer carta</button>
      <button id="shuffleBtn" class="ghost">Barajar</button>
      <button id="resetBtn" class="ghost">Reiniciar</button>
    </div>

    <div style="margin-top:10px;font-size:13px;color:#bfcfe8">
      <strong>Cartas mayores incluidas:</strong> 22. (Demo: significados abreviados)
    </div>
  </div>
</div>

<div class="panel chat">
  <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
    <h1>Chat de lectura</h1>
    <small style="color:#9fb0d6">Interfaz demo — abre en tu navegador</small>
  </div>

  <div id="messages" class="messages"></div>

  <div class="composer">
    <input id="question" type="text" placeholder="Escribe tu pregunta o intención (ej. '¿qué debo saber hoy?')" />
    <button id="sendBtn">Enviar</button>
  </div>
  <small class="hint">Cada lectura se añade como mensaje. Puedes copiar/pegar el resultado.</small>
  <footer class="note">Puedes usar este archivo como base para añadir ilustraciones, una base de datos de significados, o integrarlo con un backend.</footer>
</div>

  </div>  <script>
    // Datos: 22 arcanos mayores con significados breves
    const MAJOR = [
      {id:0,name:'El Loco',upright:'Comienzos, fe, espontaneidad.',reversed:'Impulsividad, falta de dirección.'},
      {id:1,name:'El Mago',upright:'Voluntad, recursos, manifestación.',reversed:'Manipulación, dudas.'},
      {id:2,name:'La Sacerdotisa',upright:'Intuición, misterio, sabiduría interior.',reversed:'Bloqueo interior, secretos.'},
      {id:3,name:'La Emperatriz',upright:'Abundancia, creatividad, fertilidad.',reversed:'Estancamiento creativo.'},
      {id:4,name:'El Emperador',upright:'Orden, autoridad, estructura.',reversed:'Rigidez, control excesivo.'},
      {id:5,name:'El Sumo Sacerdote',upright:'Tradición, guía espiritual, enseñanza.',reversed:'Dogma, conflicto con normas.'},
      {id:6,name:'Los Enamorados',upright:'Relaciones, decisiones, unión.',reversed:'Dudas en el compromiso, conflicto.'},
      {id:7,name:'El Carro',upright:'Triunfo, avance, disciplina.',reversed:'Estancamiento, falta de control.'},
      {id:8,name:'La Fuerza',upright:'Coraje, compasión, resistencia.',reversed:'Debilidad, ira contenida.'},
      {id:9,name:'El Ermitaño',upright:'Soledad buscada, introspección.',reversed:'Aislamiento, miedo a estar solo.'},
      {id:10,name:'La Rueda de la Fortuna',upright:'Ciclos, suerte, cambio.',reversed:'Resistencia al cambio, mala racha.'},
      {id:11,name:'La Justicia',upright:'Equilibrio, verdad, consecuencias.',reversed:'Injusticia, desbalance.'},
      {id:12,name:'El Colgado',upright:'Entrega, nueva perspectiva, pausa.',reversed:'Estancamiento, sacrificio inútil.'},
      {id:13,name:'La Muerte',upright:'Transformación, fin necesario.',reversed:'Resistencia al cambio, estancamiento.'},
      {id:14,name:'La Templanza',upright:'Moderación, armonía, sanación.',reversed:'Excesos, desequilibrio.'},
      {id:15,name:'El Diablo',upright:'Ataduras, tentación, sombras.',reversed:'Liberación, recuperación.'},
      {id:16,name:'La Torre',upright:'Ruptura, revelación, liberación forzada.',reversed:'Resistencia a la verdad, cataclismo evitado.'},
      {id:17,name:'La Estrella',upright:'Esperanza, inspiración, guía.',reversed:'Desánimo, pérdida de fe.'},
      {id:18,name:'La Luna',upright:'Subconsciente, intuición, sueños.',reversed:'Confusión, engaño.'},
      {id:19,name:'El Sol',upright:'Éxito, vitalidad, claridad.',reversed:'Falsa felicidad, retrasos.'},
      {id:20,name:'El Juicio',upright:'Renacimiento, llamado, evaluación.',reversed:'Autocrítica excesiva, falta de perdón.'},
      {id:21,name:'El Mundo',upright:'Culminación, realización, viaje completo.',reversed:'Cierre incompleto, cambio postergado.'}
    ];

    // estado
    let deck = [];
    const messagesEl = document.getElementById('messages');
    const cardVisual = document.getElementById('cardVisual');
    const readBtn = document.getElementById('readBtn');
    const shuffleBtn = document.getElementById('shuffleBtn');
    const resetBtn = document.getElementById('resetBtn');
    const sendBtn = document.getElementById('sendBtn');
    const questionInput = document.getElementById('question');

    function buildDeck(){
      // demo: sólo mayores, 22 cartas
      deck = [...MAJOR];
      shuffleArray(deck);
    }

    function shuffleArray(a){
      for(let i=a.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];
      }
      return a;
    }

    function appendMessage(text,who='bot'){
      const div=document.createElement('div');div.className='msg '+(who==='user'?'user':'bot');div.innerHTML=text;messagesEl.appendChild(div);messagesEl.scrollTop=messagesEl.scrollHeight;
    }

    function showCardFace(card,reversed=false){
      cardVisual.className='card-face';
      cardVisual.innerHTML=`<div style="font-weight:700;font-size:18px">${card.name}${reversed? ' (invertida)':''}</div>
        <div style="font-size:13px">${reversed?card.reversed:card.upright}</div>
        <div style="font-size:11px;color:#41506a">ID ${card.id}</div>`;
    }

    function singleRead(question){
      if(deck.length===0) buildDeck();
      const allowRev = document.getElementById('allowReverse').checked;
      const card = deck.pop();
      const reversed = allowRev && Math.random()>0.66; // ~33% invertida
      showCardFace(card,reversed);
      let reply = `<strong>${card.name}${reversed? ' (Invertida)':''}</strong><br/>`;
      reply += `${reversed?card.reversed:card.upright}`;
      if(question) reply = `<em>Pregunta:</em> ${escapeHtml(question)}<br/>`+reply;
      appendMessage(reply,'bot');
    }

    function threeRead(question){
      if(deck.length<3) buildDeck();
      const allowRev = document.getElementById('allowReverse').checked;
      const picked = [deck.pop(),deck.pop(),deck.pop()];
      const positions=['Pasado','Presente','Futuro'];
      showCardFace(picked[1],false); // muestra la del medio como visual
      let reply = '';
      for(let i=0;i<3;i++){
        const rev = allowRev && Math.random()>0.66;
        reply += `<strong>${positions[i]} — ${picked[i].name}${rev?' (Invertida)':''}</strong><br/>${rev?picked[i].reversed:picked[i].upright}<br/><br/>`;
      }
      if(question) reply = `<em>Pregunta:</em> ${escapeHtml(question)}<br/>`+reply;
      appendMessage(reply,'bot');
    }

    function escapeHtml(s){return s.replace(/[&<>"']/g,function(c){return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'":"' }[c] || c;});}

    readBtn.addEventListener('click',()=>{
      const q=questionInput.value.trim();
      const spread=document.getElementById('spreadSelect').value;
      if(q){appendMessage('<em>'+escapeHtml(q)+'</em>','user')}
      if(spread==='single') singleRead(q); else threeRead(q);
    });

    shuffleBtn.addEventListener('click',()=>{buildDeck();appendMessage('<em>Baraja mezclada.</em>','bot');cardVisual.className='card-back';cardVisual.textContent='Baraja (haz lectura)'});
    resetBtn.addEventListener('click',()=>{buildDeck();messagesEl.innerHTML='';cardVisual.className='card-back';cardVisual.textContent='Baraja (haz lectura)';appendMessage('Interfaz reiniciada.','bot');});
    sendBtn.addEventListener('click',()=>{readBtn.click();questionInput.value='';});
    questionInput.addEventListener('keydown',(e)=>{if(e.key==='Enter'){sendBtn.click();}});

    // init
    buildDeck();appendMessage('Bienvenido — escribe tu intención y presiona "Leer carta".','bot');
  </script></body>
</html>